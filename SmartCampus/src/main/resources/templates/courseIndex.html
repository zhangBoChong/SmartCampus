<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=emulateIE7" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="css/style.css" />
<link rel="stylesheet" type="text/css" href="css/WdatePicker.css" />
<link rel="stylesheet" type="text/css" href="css/skin_/table.css" />
<link rel="stylesheet" type="text/css" href="css/jquery.grid.css" />


<title>表格</title>
<style type="text/css">
	.search-box div{
		margin-left: 1rem;
	}
	.search-button:nth-child(1) input{
		background: #FF7200;
	}
	.iselect-wrapper {
	    position: relative;
	    width: 80px;
	    height: 28px;
	    padding: 0 20px 0 5px;
	    line-height: 28px;
	    border-width: 1px;
	    border-style: solid;
	    border-left-color: #c5c5c5;
	    border-top-color: #c5c5c5;
	    border-right-color: #e0e0e0;
	    border-bottom-color: #e0e0e0;
	    background: url(../img/skin_/select_normal.png) no-repeat right center #fff;
	    margin-top: 0.3rem;
	}
	.CK{
		position: relative;
	    width: 12.4rem;	
	    height: 28px;
	    padding: 0 20px 0 5px;
	    line-height: 28px;
	    border-width: 1px;
	    border-style: solid;
	    border-left-color: #c5c5c5;
	    border-top-color: #c5c5c5;
	    border-right-color: #e0e0e0;
	    border-bottom-color: #e0e0e0;
	    margin-top: 0.3rem;
	}
	.opt span{
		margin-left: 1.1rem;
	}
	.opt select{
		position: relative;
	    width: 107px;
	    height: 28px;
	    top:0.35rem;
	}
	.opt input{
		width: 5rem;
		height: 1.9rem;
		margin-top: 0.3rem;
		background: #url(../img/skin_/formbtnbg.png);
	}
	.tab table tr{
		height: 2.5rem;
	}
	.tab table tr td{
		border: 0.5px solid #CFCFCF;		
		width: 12rem;
		text-align: center;
	}
	.tab table tr td:last-child{
		width: 21rem;
	}
	.tab table{
		font-size: 0.8rem;	
		margin-left: -0.6rem;
		width: 105.7rem;	
	}
	.teacher tr{
		display: none;
	}
	#addKC{
		width: 25rem;
		height: 20rem;
		border: 3px groove #3EAADD;
		background: #F5F5F5;
		z-index: 2;
		position: absolute;
		left: 38rem;
		display: none;
	    padding-left: 7.5rem;
	    padding-top: 0.5rem;
	}
	#addKC h1{
		font-family: "楷体";
		font-size: 2rem;
		margin-left: 5rem;
	}
	#addKC p{
		display: flex;
		margin-top: 0.5rem		
	}
	
	#addKC p select{
	    width: 227px;
	    height: 28px;
	    margin-top: 0.3rem	    
	}
	#addKC p span{
		margin-top: 0.5rem;
	}
	#addKC .iselect-wrapper {
	    width: 200px;
	}
</style>
</head>

<body>
<div id="container">
	
    <div id="bd">
    	<div id="main">
        	<div class="search-box ue-clear"> 
        		<div class="search-button">
                	<input class="button" type="button" value="课程查看" />
                </div>
                <div class="search-button">
                	<input class="button" type="button" value="自动排课" />
                </div>
                <div class="search-button">
                	<input class="button" type="button" value="手动调课" />
                </div>
                <div class="search-button">
                	<input class="button" type="button" value="课表查询" />
                </div>
                <div class="search-button">
                	<input class="button" type="button" value="课表统计" />
                </div>
                <div class="search-button">
                	<input class="button" type="button" value="调课审核" />
                </div>
             </div>
             
            <div class="table">
            	<div class="opt ue-clear" style="display: flex;line-height: 2.5rem;">
                		<span>版本号</span>
	            		<select class="chooseVession">
	            			<option value="0">请选择</option>
	            			<option v-for="(item,index) in vessions" v-bind:value="item.vid">{{item.vname}}</option>
	            		</select>
	            		<span>年级</span>
	            		<select class="chooseGrade">
	            			<option value="0">请选择</option>
	            			<option v-for="(item,index) in grades" v-bind:value="item.bid">{{item.grade.gname}}</option>
	            		</select>	            		
	            		<span>专业</span>
	            		<select class="chooseMajor">
	            			<option value="0">请选择</option>
	            			<option v-for="(item,index) in majors" v-bind:value="item.vgmid">{{item.major.majorname}}</option>
	            		</select>
	            		<span>课程</span>
	            		<select id="chooseCourse">
	            			<option value="0">请选择</option>
	            			<option v-for="(item,index) in courses" v-bind:value="item.cvgmid">{{item.course.coursename}}</option>
	            		</select>
	            		<span>教员</span>
	            		<select id="chooseTeacher">
	            			<option value="0">请选择</option>
	            			<option v-for="(item,index) in teachers" v-bind:value="item.ctid">{{item.staff.tname}}</option>
	            		</select>
	            		<div class="search-button" style="margin-left: 51.5rem;">
	            		<input type="hidden" id="id22" value="22">
		                	<span v-for="i22 in ButtonmiddleList1" v-if="i22.buttonstatus==0"> <input class="button" id="AddCourse" type="button" value="新增课程" v-on:click="show1()"/></span>
		                </div>
                </div>
                <div  class="opt ue-clear tab">
                		<table>	     
	                		<tr class="opt">
	                			<td>班级名称</td>
	                			<td>班主任</td>
	                			<td>课程进度(节次)</td>
	                		</tr>
	                		<tr v-for="(item,index) in clazzs">
	                			<td>{{item.clazz.cname}}</td>
	                			<td>{{item.clazz.staff.tname}}</td>
	                			<td>{{item.courseschedule}}</td>
	                		</tr>                		
	                	</table>
  	
                </div>  
                
            </div>
        </div>
    </div>
   
    <div id="addKC">
    	<h1>新增课程</h1>
    	<p>
    		<span>版  本  :</span>
	    	<select class="chooseVession" id="vid">
	    		<option value="0">请选择</option>
	    		<option v-for="(item,index) in vessions" v-bind:value="item.vid">{{item.vname}}</option>
	    	</select>
    	</p>
    	<p>
    		<span>年  级  :</span>
	    	<select class="chooseGrade" id="bid"> 
	    		<option value="0">请选择</option>
	    		<option v-for="(item,index) in grades" v-bind:value="item.bid">{{item.grade.gname}}</option>
	    	</select>
    	</p>
    	<p>
    		<span>专  业  :</span>
	    	<select class="chooseMajor" id="vgmid">
	    		<option value="0">请选择</option>
	    		<option v-for="(item,index) in majors" v-bind:value="item.vgmid">{{item.major.majorname}}</option>
	    	</select>
    	</p>
    	<p style="margin-left: -1.3rem;">
    		<span>课程名称  :</span>
	    	<input class="CK" type="text" name="" id="coursename" value="" />
    	</p>
    	<p style="margin-left: 0.3rem;">
    		<span>课时  :</span>
	    	<input class="CK" type="text" name="" id="coursetime" value="" />
    	</p>
    	<div style="display: flex;padding-top: 1rem;">
    		<div class="search-button" id="save">
        		<input class="button" type="button" value="保存" />
        	</div>
	        <div class="search-button" id="cancel" style="margin-left: 1rem;">
	        	<input class="button" type="reset" value="取消" />
	        </div>
    	</div>
    	        
    </div>
</div>
</body>
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/global.js"></script>
<script type="text/javascript" src="js/jquery.select.js"></script>
<script type="text/javascript" src="js/core.js"></script>
<script type="text/javascript" src="js/jquery.pagination.js"></script>
<script type="text/javascript" src="js/jquery.grid.js"></script>
<script type="text/javascript" src="js/WdatePicker.js"></script>
<script type="text/javascript" src="js/vue.js"></script>
<script type="text/javascript">
	$(function(){
		var v=new Vue({
			el:"#container",
			data:{
				vessions:null,
				grades:null,
				majors:null,
				courses:null,
				teachers:null,
				clazzs:null,
				ButtonmiddleList1:null
			},created(){
				this.cx22();
			},methods:{
				show1:function(){
					$("#addKC").fadeIn();
				},cx22:function(){
					var id22 = $("#id22").val();
					//alert(id22);
					$.ajax({
						url:"/querybuttonmiddle",
						data:"buttonid="+id22,
						success:function(data){
							v.ButtonmiddleList1=data;
						}
					});
				}
			}
		});

		//显示隐藏新增课程
		/* $("#AddCourse").click(function(){	
			$("#addKC").fadeIn();		
		}); */
		//保存隐藏div
		$("#save").click(function(){
			$("#addKC").fadeOut();
		});
		//取消隐藏div
		$("#cancel").click(function(){
			$("#addKC").fadeOut();
		});
		
		//ajax查询版本
		$.ajax({
			url:'ToVessions',
			dataType:'json',
			type:'post',
			success:function(data){
	    		v.vessions=data;
	    	}
		});
		
		
		$(".chooseVession").change(function(){
			var vid=$(this).val();
			$.ajax({
				url:'ToGrades',
				data:'vid='+vid,
				dataType:'json',
				type:'post',
				success:function(data){
		    		v.grades=data;
		    	}
			});
		});
		$(".chooseGrade").change(function(){
			var bid=$(this).val();
			$.ajax({
				url:'ToMajors',
				data:'bid='+bid,
				dataType:'json',
				type:'post',
				success:function(data){
		    		v.majors=data;
		    	}
			});
		});
		$(".chooseMajor").change(function(){
			var vgmid=$(this).val();
			$.ajax({
				url:'ToCourses',
				data:'vgmid='+vgmid,
				dataType:'json',
				type:'post',
				success:function(data){
		    		v.courses=data;
		    	}
			});
		});
		$("#chooseCourse").change(function(){
			var cvgmid=$(this).val();
			$.ajax({
				url:'ToTeachers',
				data:'cvgmid='+cvgmid,
				dataType:'json',
				type:'post',
				success:function(data){
		    		v.teachers=data;
		    	}
			});
		});
		$("#chooseTeacher").change(function(){
			var ctid=$(this).val();
			$.ajax({
				url:'ToClazzs',
				data:'ctid='+ctid,
				dataType:'json',
				type:'post',
				success:function(data){
		    		v.clazzs=data;
		    	}
			});
		});
		$("#save").click(function(){
			var vgmid=$("#vgmid").val();
			var coursename=$("#coursename").val();
			var coursetime=$("#coursetime").val();			
			/* $.ajax({
				url:'AddCourse',
				data:'coursename='+coursename+'&coursetime='+coursetime+'&vgmid='+vgmid,
				dataType:'json',
				type:'post',
				success:function(data){
					alert("新增成功!");
		    	}
			}); */
			$("#vid option:first").prop("selected", 'selected');
			$("#bid option:first").prop("selected", 'selected');
			$("#vgmid option:first").prop("selected", 'selected');
			$("#coursename").val("");
			$("#coursetime").val("");
		});
	})
</script>
</html>
